# Trade Bot ‚Äî Smart Money Trading Bot –∑ –°–∏—Å—Ç–µ–º–æ—é –†–∏–∑–∏–∫-–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É

–¢–æ—Ä–≥–æ–≤–∏–π –±–æ—Ç –¥–ª—è Binance –∑ AI —Å–∏–≥–Ω–∞–ª–∞–º–∏, Smart Money –∞–Ω–∞–ª—ñ–∑–æ–º —Ç–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ—é —Å–∏—Å—Ç–µ–º–æ—é —Ä–∏–∑–∏–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ.

## üöÄ –ù–æ–≤—ñ –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

### –°–∏—Å—Ç–µ–º–∞ –†–∏–∑–∏–∫-–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è —É–≥–æ–¥** –ø–µ—Ä–µ–¥ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º
- **–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –±–µ–∑–ø–µ—á–Ω–∏—Ö —Ä–æ–∑–º—ñ—Ä—ñ–≤ –ø–æ–∑–∏—Ü—ñ–π** –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ä–∏–∑–∏–∫—É
- **Stop Loss —Ç–∞ Take Profit** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
- **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ä–∏–∑–∏–∫—ñ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ**
- **–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –∫—Ä–∏—Ç–∏—á–Ω—ñ —Å–∏—Ç—É–∞—Ü—ñ—ó**
- **–ì–Ω—É—á–∫—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è** –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –ø—Ä–æ—Ñ—ñ–ª—ñ–≤ —Ä–∏–∑–∏–∫—É

### –¢–æ—Ä–≥–æ–≤–∏–π –î–≤–∏–≥—É–Ω

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —É–≥–æ–¥** –∑ –¥–æ—Ç—Ä–∏–º–∞–Ω–Ω—è–º –ø—Ä–∞–≤–∏–ª —Ä–∏–∑–∏–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É
- **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ü—ñ–Ω –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ**
- **–û–±—Ä–æ–±–∫–∞ —Ç–æ—Ä–≥–æ–≤–∏—Ö —Å–∏–≥–Ω–∞–ª—ñ–≤**
- **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –æ—Ä–¥–µ—Ä–∞–º–∏**

### –°–∏—Å—Ç–µ–º–∞ –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É

- **–í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É —Å–∏—Å—Ç–µ–º–∏**
- **Telegram —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è**
- **–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ**
- **–Ü—Å—Ç–æ—Ä—ñ—è —Å–ø–æ–≤—ñ—â–µ–Ω—å**

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ –∑–º—ñ–Ω–Ω–∏–º–∏:

```env
# Binance API
BINANCE_API_KEY=your_binance_api_key_here
BINANCE_API_SECRET=your_binance_api_secret_here

# Database
DATABASE_URL=sqlite:///./trading_bot.db

# OpenAI API (–¥–ª—è —Å–µ–Ω—Ç–∏–º–µ–Ω—Ç –∞–Ω–∞–ª—ñ–∑—É)
OPENAI_API_KEY=your_openai_api_key_here

# Telegram Bot
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
FASTAPI_URL=http://localhost:8000
```

### 3. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

```bash
python app/init_db.py
```

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –í–∞—Ä—ñ–∞–Ω—Ç 1: –ü—Ä—è–º–∏–π –∑–∞–ø—É—Å–∫
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# –í–∞—Ä—ñ–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫—É
python app/run.py
```

## ü§ñ Telegram Bot –ö–æ–º–∞–Ω–¥–∏

- `/start` –∞–±–æ `/help` - –ü–æ–∫–∞–∑–∞—Ç–∏ –≤—Å—ñ –∫–æ–º–∞–Ω–¥–∏
- `/ai_signal SYMBOL` - –ü–æ–≤–Ω–∏–π AI –∞–Ω–∞–ª—ñ–∑ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `/ai_signal BTCUSDT`)
- `/smart_money SYMBOL` - Smart Money –∞–Ω–∞–ª—ñ–∑ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `/smart_money ETHUSDT`)
- `/last SYMBOL` - –û—Å—Ç–∞–Ω–Ω—ñ–π –∑–±–µ—Ä–µ–∂–µ–Ω–∏–π —Å–∏–≥–Ω–∞–ª
- `/cache_stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à—É
- `/cache_clear` - –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à

## üìä API –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ñ API

- `GET /` - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
- `GET /signal/{symbol}` - AI —Å–∏–≥–Ω–∞–ª –¥–ª—è —Å–∏–º–≤–æ–ª—É
- `GET /smart_money/{symbol}` - Smart Money –∞–Ω–∞–ª—ñ–∑
- `GET /signals/latest/{symbol}` - –û—Å—Ç–∞–Ω–Ω—ñ–π —Å–∏–≥–Ω–∞–ª –∑ –ë–î
- `GET /cache/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à—É
- `POST /cache/clear` - –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à

### –†–∏–∑–∏–∫-–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç API

- `GET /risk/metrics` - –û—Ç—Ä–∏–º–∞–Ω–Ω—è –º–µ—Ç—Ä–∏–∫ —Ä–∏–∑–∏–∫—É
- `POST /risk/validate-trade` - –í–∞–ª—ñ–¥–∞—Ü—ñ—è —É–≥–æ–¥–∏
- `GET /risk/position-size/{symbol}` - –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ä–æ–∑–º—ñ—Ä—É –ø–æ–∑–∏—Ü—ñ—ó
- `GET /risk/stop-loss/{symbol}` - –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ Stop Loss
- `GET /risk/take-profit/{symbol}` - –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ Take Profit

### –¢–æ—Ä–≥–æ–≤–∏–π –î–≤–∏–≥—É–Ω API

- `GET /trading/status` - –°—Ç–∞—Ç—É—Å —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –¥–≤–∏–≥—É–Ω–∞
- `POST /trading/start` - –ó–∞–ø—É—Å–∫ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –¥–≤–∏–≥—É–Ω–∞
- `POST /trading/stop` - –ó—É–ø–∏–Ω–∫–∞ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –¥–≤–∏–≥—É–Ω–∞

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ API

- `GET /monitoring/status` - –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
- `GET /monitoring/alerts` - –Ü—Å—Ç–æ—Ä—ñ—è —Å–ø–æ–≤—ñ—â–µ–Ω—å
- `POST /monitoring/start` - –ó–∞–ø—É—Å–∫ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
- `POST /monitoring/stop` - –ó—É–ø–∏–Ω–∫–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É

## üß† Smart Money –ú–æ–¥—É–ª—å

Smart Money –º–æ–¥—É–ª—å –≤–∫–ª—é—á–∞—î:

- –ú–∞—à–∏–Ω–Ω–µ –Ω–∞–≤—á–∞–Ω–Ω—è (LogisticRegression)
- –¢–µ—Ö–Ω—ñ—á–Ω—ñ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ (RSI, MACD, ADX, ATR)
- –ê–Ω–∞–ª—ñ–∑ –¥–∏—Å–±–∞–ª–∞–Ω—Å—É –æ—Ä–¥–µ—Ä–±—É–∫–∞
- –°–µ–Ω—Ç–∏–º–µ–Ω—Ç –∞–Ω–∞–ª—ñ–∑ –Ω–æ–≤–∏–Ω
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ—Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è –º–æ–¥–µ–ª—ñ

## ‚ö° –°–∏—Å—Ç–µ–º–∞ –∫–µ—à—É–≤–∞–Ω–Ω—è

–°–∏—Å—Ç–µ–º–∞ –∫–µ—à—É–≤–∞–Ω–Ω—è –ø–æ–∫—Ä–∞—â—É—î –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:

- **–ö–µ—à—É–≤–∞–Ω–Ω—è OHLCV –¥–∞–Ω–∏—Ö** - –∑–º–µ–Ω—à—É—î –∑–∞–ø–∏—Ç–∏ –¥–æ Binance API
- **–ö–µ—à—É–≤–∞–Ω–Ω—è Smart Money —Å–∏–≥–Ω–∞–ª—ñ–≤** - –ø—Ä–∏—Å–∫–æ—Ä—é—î –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è** - –≤–∏–¥–∞–ª—è—î –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ –¥–∞–Ω—ñ
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ** - –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –∫–µ—à—É
- **–ù–∞–ª–∞—à—Ç–æ–≤—É–≤–∞–Ω—ñ TTL** - —Ä—ñ–∑–Ω–∏–π —á–∞—Å –∂–∏—Ç—Ç—è –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –¥–∞–Ω–∏—Ö

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Smart Money –º–æ–¥—É–ª—è
python app/test_smart_money.py

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ –∫–µ—à—É–≤–∞–Ω–Ω—è
python app/test_cache.py

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ —Ä–∏–∑–∏–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É
python test_risk_management.py

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API
python api_examples.py
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
app/
‚îú‚îÄ‚îÄ main.py              # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ database.py          # –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ models.py            # –ú–æ–¥–µ–ª—ñ –ë–î
‚îú‚îÄ‚îÄ telegram_bot.py      # Telegram –±–æ—Ç
‚îú‚îÄ‚îÄ run.py               # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫—É
‚îú‚îÄ‚îÄ test_smart_money.py  # –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Smart Money
‚îú‚îÄ‚îÄ risk_config.py       # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ä–∏–∑–∏–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É
‚îî‚îÄ‚îÄ services/
    ‚îú‚îÄ‚îÄ ai_signals.py    # AI —Å–∏–≥–Ω–∞–ª—å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞
    ‚îú‚îÄ‚îÄ smart_money.py   # Smart Money –∞–Ω–∞–ª—ñ–∑
    ‚îú‚îÄ‚îÄ binance_api.py   # Binance API
    ‚îú‚îÄ‚îÄ new_sentiment.py # –°–µ–Ω—Ç–∏–º–µ–Ω—Ç –∞–Ω–∞–ª—ñ–∑
    ‚îú‚îÄ‚îÄ cache.py         # –°–∏—Å—Ç–µ–º–∞ –∫–µ—à—É–≤–∞–Ω–Ω—è
    ‚îú‚îÄ‚îÄ risk_management.py # –°–∏—Å—Ç–µ–º–∞ —Ä–∏–∑–∏–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É
    ‚îú‚îÄ‚îÄ trading_engine.py  # –¢–æ—Ä–≥–æ–≤–∏–π –¥–≤–∏–≥—É–Ω
    ‚îî‚îÄ‚îÄ monitoring.py      # –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É

# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Ç–∞ —Ç–µ—Å—Ç–∏
‚îú‚îÄ‚îÄ RISK_MANAGEMENT_README.md # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Ä–∏–∑–∏–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É
‚îú‚îÄ‚îÄ test_risk_management.py   # –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ —Ä–∏–∑–∏–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É
‚îî‚îÄ‚îÄ api_examples.py           # –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è API
```

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### Smart Money –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

```env
SM_SYMBOL=BTCUSDT
SM_TIMEFRAME=5m
SM_HORIZON_BARS=12
SM_POS_TH=0.002
SM_NEG_TH=-0.002
SM_RETRAIN_HOURS=6
```

### –í–∞–≥–∏ —Å–∏–≥–Ω–∞–ª—ñ–≤

```env
SIGNAL_WEIGHTS={"tech":0.5,"smart":0.25,"gpt":0.25}
```

## üéØ –î–æ—Å—Ç—É–ø–Ω—ñ –ø–∞—Ä–∏

BTCUSDT, ETHUSDT, BNBUSDT, ADAUSDT, DOTUSDT —Ç–∞ —ñ–Ω—à—ñ –ø–∞—Ä–∏ –∑ Binance.

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Å–∏—Å—Ç–µ–º–∏ —Ä–∏–∑–∏–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É](RISK_MANAGEMENT_README.md) - –î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å —Å–∏—Å—Ç–µ–º–∏ —Ä–∏–∑–∏–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É
- [–ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è API](api_examples.py) - –ü—Ä–∏–∫–ª–∞–¥–∏ —Ä–æ–±–æ—Ç–∏ –∑ API
- [–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏](test_risk_management.py) - –¢–µ—Å—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ä–æ–±–æ—Ç–∏ —Å–∏—Å—Ç–µ–º–∏

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ

**–¶—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –¥–æ–ø–æ–º–æ–≥–∏ –≤ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—ñ —Ä–∏–∑–∏–∫–∞–º–∏, –∞–ª–µ –Ω–µ –≥–∞—Ä–∞–Ω—Ç—É—î –ø—Ä–∏–±—É—Ç–∫–æ–≤—ñ—Å—Ç—å. –ó–∞–≤–∂–¥–∏ —Ç–µ—Å—Ç—É–π—Ç–µ –Ω–∞ –¥–µ–º–æ-—Ä–∞—Ö—É–Ω–∫–∞—Ö –ø–µ—Ä–µ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –∫–æ—à—Ç–∞—Ö.**
